{% extends 'auth_app/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block stylecss %}
    <link rel="stylesheet" href="{% static 'posts_app/post-detail.css' %}">
{% endblock %}

{% block content %}

    <div class="d-flex flex-column col-lg-8 offset-lg-2 col-md-6 offset-md-3 mb-3 pb-3 pt-3 border border-dark">
        <div class="d-flex flex-row align-items-center">
            <div>
                <img src="{{ object.author.profile.profile_pic.url }}" class="rounded-circle" width="50px">
            </div>
            <div>
                <a href="{% url 'user-profile' object.author.username %}">
                    <span class="ml-2 font-weight-bold">{{ object.author.username }}</span></a>
                <small class="text-muted ml-2">{{ object.date_posted|date:'F d, Y' }}</small>
            </div>
        </div>
        <div>
            <h1 class="text-center">{{ post.title }}</h1>
        </div>
        <div class="text-center">
            <img src="{{ object.image.url }}" class="img-fluid">
        </div>
        <div class="mt-3 like">
            {% if not already_liked %}
                <a href="{% url 'like' object.id %}" class="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                         class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                    </svg>
                </a>
                <span>{{ object.number_of_likes }} Like{{ object.number_of_likes|pluralize }}</span>
            {% else %}
                <a href="{% url 'unlike' object.id %}" class="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                         class="bi bi-heart-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                </a>
                <span>{{ object.number_of_likes }} Like{{ object.number_of_likes|pluralize }}</span>
            {% endif %}
        </div>
    </div>

    {#    <!-- COMMENTS -->#}
    {##}
    {#    <div class="content-section mt-3">#}
    {#        <form action="" method="POST">#}
    {#            {% csrf_token %}#}
    {#            <fieldset class="form-group">#}
    {#                <legend class="border-bottom mb-3">Leave a comment</legend>#}
    {#                {{ comment_form|crispy }}#}
    {#            </fieldset>#}
    {#            <div class="form-group">#}
    {#                <button class="btn btn-outline-info" type="submit">Post</button>#}
    {#            </div>#}
    {#        </form>#}
    {#    </div>#}
    {##}
    {#    {% if comments %}#}
    {#        <strong class="text-secondary">{{ object.number_of_comments }}#}
    {#            Comment{{ object.number_of_comments|pluralize }}</strong>#}
    {#        <hr>#}
    {#        {% for comment in comments %}#}
    {#            <div class="pl-3 mb-3 border">#}
    {#                <strong class="text-info">{{ comment.name }}</strong>#}
    {#                <small class="text-muted">{{ comment.date_posted|date:'F d, Y' }}</small>#}
    {#                <div class="ml-2">#}
    {#                    <p>{{ comment.content|safe|linebreaks }}</p>#}
    {#                </div>#}
    {#            </div>#}
    {#        {% endfor %}#}
    {#    {% else %}#}
    {#        <strong class="text-secondary">No comments yet...</strong>#}
    {#    {% endif %}#}

{% endblock %}
